<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>System</title>
    <style>
        /* MENTALIST DARK MODE */
        body {
            background-color: #000;
            color: #444;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden; /* Prevent scrolling */
        }

        #container {
            width: 85%;
            max-width: 400px;
            text-align: center;
        }

        /* Stealth Input */
        input {
            background: #0a0a0a;
            border: 1px solid #222;
            color: #eee;
            padding: 20px;
            width: 100%;
            box-sizing: border-box; 
            font-size: 20px;
            text-align: center;
            border-radius: 8px;
            outline: none;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        input:focus {
            border-color: #444;
        }

        /* Hidden/Ghost Button */
        button {
            margin-top: 20px;
            background: transparent;
            color: #333;
            border: 1px solid #111;
            padding: 10px 30px;
            cursor: pointer;
            font-size: 14px;
            border-radius: 5px;
            transition: color 0.3s;
        }
        
        button:active {
            color: #fff;
            border-color: #333;
        }

        /* Result List */
        #result-area {
            margin-top: 40px;
            text-align: center;
            max-height: 50vh;
            overflow-y: auto;
        }

        .word-item {
            color: #888;
            padding: 12px;
            font-size: 24px;
            letter-spacing: 1px;
            cursor: pointer;
            border-bottom: 1px solid #111;
        }

        .word-item:hover {
            color: #fff;
        }

        .error-log {
            color: #300;
            font-size: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div id="container">
    <input type="text" id="inputData" placeholder="..." autocomplete="off">
    <button id="procBtn" onclick="fetchWords()">ACQUIRE</button>
    
    <div id="result-area"></div>
    <div id="error-log" class="error-log"></div>
</div>

<script>
    // --- CONFIGURATION ---
    // PASTE YOUR NEW KEY HERE (Keep the quotes!)
    const API_KEY = 'YOUR_NEW_GOOGLE_API_KEY_HERE'; 
    
    // Using the standard Flash model for speed
    const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

    async function fetchWords() {
        const input = document.getElementById('inputData').value;
        const resultArea = document.getElementById('result-area');
        const errorLog = document.getElementById('error-log');
        
        if(!input) return;

        // Visual feedback
        resultArea.innerHTML = '<div style="color:#222; font-size:14px;">CALCULATING...</div>';
        errorLog.innerText = '';

        // The Prompt ensures pure JSON output
        const promptText = `
            Task: Anagram/Word completion.
            Input: "${input}"
            
            Strict Rules:
            1. Return ONLY a JSON array of strings (e.g. ["WORD1", "WORD2"]).
            2. No other text. No markdown blocks.
            3. If user gives scrambled letters, find the word.
            4. If user gives constraints (starts with...), find the word.
        `;

        const payload = {
            contents: [{
                parts: [{ text: promptText }]
            }]
        };

        try {
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            const data = await response.json();

            // PARSE GEMINI RESPONSE STRUCTURE
            // Gemini structure: data.candidates[0].content.parts[0].text
            if (!data.candidates || data.candidates.length === 0) {
                throw new Error("No candidates returned");
            }

            let rawText = data.candidates[0].content.parts[0].text;
            
            // Clean markdown if Gemini adds it (```json ... ```)
            rawText = rawText.replace(/```json/g, '').replace(/```/g, '').trim();
            
            const wordList = JSON.parse(rawText);

            // RENDER
            resultArea.innerHTML = ''; 
            
            if (wordList.length === 0) {
                resultArea.innerHTML = '<div style="color:#333">NO SIGNAL</div>';
                return;
            }

            wordList.forEach(word => {
                const div = document.createElement('div');
                div.className = 'word-item';
                div.innerText = word;
                
                // Click to "select" (Visual Force)
                div.onclick = () => {
                    div.style.color = "#fff";
                    div.style.fontWeight = "bold";
                    div.style.textShadow = "0 0 10px #fff";
                };
                
                resultArea.appendChild(div);
            });

        } catch (error) {
            console.error(error);
            resultArea.innerHTML = '';
            errorLog.innerText = "CONNECTION ERROR";
        }
    }

    // Allow "Enter" key to trigger
    document.getElementById("inputData").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            fetchWords();
        }
    });
</script>

</body>
</html>
