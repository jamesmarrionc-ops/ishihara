<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Google</title>
    <style>
        /* --- 1. CORE STYLES --- */
        * { box-sizing: border-box; touch-action: none; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: #000; /* OLED Black */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overflow: hidden;
            color: #fff;
        }

        /* --- 2. THE INVISIBLE GRID --- */
        #input-layer {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr; /* Left, Right */
            grid-template-rows: 1fr 1fr 1fr; /* Top, Mid, Bot */
            z-index: 10;
        }

        /* PRACTICE MODE: Change opacity to 0 when ready to perform! */
        .zone {
            opacity: 1; 
            border: 1px solid #111;
            display: flex; align-items: center; justify-content: center;
            color: #333; font-size: 14px; font-weight: bold;
        }

        /* --- 3. REVEAL SCREEN --- */
        #reveal-layer {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            background: #000;
            display: none; /* Hidden by default */
            flex-direction: column;
            align-items: center; justify-content: center;
            z-index: 20;
            padding: 20px;
        }

        /* Looks like a fake Google result header */
        .header { font-size: 1.2rem; color: #9aa0a6; margin-bottom: 30px; }

        /* The Main Result */
        #primary-word {
            font-size: 3.5rem;
            font-weight: 800;
            letter-spacing: 2px;
            text-transform: uppercase;
            text-align: center;
            margin-bottom: 20px;
            color: #fff;
        }

        /* The Alternatives (Phishing list) */
        #alt-words {
            font-size: 1.1rem;
            color: #666;
            text-align: center;
            max-width: 90%;
            line-height: 1.4;
        }

        /* --- 4. STATUS BAR (Tiny text at bottom) --- */
        #status {
            position: absolute; bottom: 15px; left: 0; width: 100%;
            text-align: center; color: #222; font-size: 10px; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="input-layer">
        <div class="zone" data-val="1">1 / STR</div>
        <div class="zone" data-val="2">2 / STR</div>
        <div class="zone" data-val="3">3 / CRV</div>
        <div class="zone" data-val="4">4 / CRV</div>
        <div class="zone" data-val="5">5 / MIX</div>
        <div class="zone" data-val="6">6 / MIX</div>
    </div>

    <div id="status">Loading Dictionary...</div>

    <div id="reveal-layer">
        <div class="header">Did you mean:</div>
        <div id="primary-word">...</div>
        <div id="alt-words"></div>
    </div>

<script>
    // --- 1. CONFIGURATION ---
    const MIN_WORD_LENGTH = 3;
    const MAX_WORD_LENGTH = 9;
    
    // --- 2. LOGIC HELPERS ---
    
    // Straight: A E F H I K L M N T V W X Y Z
    // Curved: C O S U
    // Mixed: B D G J P Q R
    function getShape(char) {
        if (!char) return "S";
        const c = char.toUpperCase();
        if ("COSU".includes(c)) return "C"; 
        if ("BDGJPQR".includes(c)) return "M"; 
        return "S"; 
    }

    function getVowels(word) {
        const vowels = "AEIOU";
        let idx = [];
        [...word.toUpperCase()].forEach((c, i) => {
            if (vowels.includes(c)) idx.push(i + 1);
        });
        return idx;
    }

    // --- 3. DICTIONARY LOADER ---
    // Instead of pasting 10k words, we fetch them dynamically.
    const dictionary = {};
    const status = document.getElementById('status');

    async function initApp() {
        try {
            // Fetch Google's 10,000 common english words list
            const response = await fetch('https://raw.githubusercontent.com/first20hours/google-10000-english/master/google-10000-english-no-swears.txt');
            const text = await response.text();
            
            // Process the list
            const rawWords = text.split('\n');
            
            rawWords.forEach(word => {
                if(word.length < MIN_WORD_LENGTH || word.length > MAX_WORD_LENGTH) return;

                word = word.toUpperCase();
                
                // 1. Vowel Positions (Cap at 6)
                const v = getVowels(word);
                let v1 = v[0] || 6; 
                let v2 = v[1] || 6;
                if (v1 > 6) v1 = 6;
                if (v2 > 6) v2 = 6;

                // 2. Shapes
                const s1 = getShape(word[0]);
                const s2 = getShape(word[word.length-1]);

                // 3. Build Key: "V1-V2-S1-S2"
                const key = `${v1}-${v2}-${s1}-${s2}`;

                // 4. Add to Map
                if (!dictionary[key]) dictionary[key] = [];
                if (!dictionary[key].includes(word)) dictionary[key].push(word);
            });

            status.innerText = "Ready. System Active.";
            console.log("Dictionary loaded with keys:", Object.keys(dictionary).length);

        } catch (err) {
            status.innerText = "Offline Mode (Limited Database)";
            // Fallback to a tiny list if offline
            loadOfflineFallback();
        }
    }

    function loadOfflineFallback() {
        // Fallback list just in case
        const backup = ["APPLE","WATER","MAGIC","TIGER","ZEBRA","HOUSE","PHONE"];
        backup.forEach(word => { /* logic to add to dict */ });
    }

    // --- 4. INPUT HANDLING ---
    let step = 0;
    let inputs = { v1:0, v2:0, s1:'', s2:'' };
    
    // Grid Setup
    document.querySelectorAll('.zone').forEach(z => {
        z.addEventListener('touchstart', (e) => {
            e.preventDefault();
            let val = parseInt(z.dataset.val);
            handleInput(val);
            
            // Feedback
            if(navigator.vibrate) navigator.vibrate(40);
            z.style.background = "#222";
            setTimeout(()=> z.style.background = "transparent", 100);
        });
    });

    function handleInput(val) {
        step++;

        if (step === 1) {
            inputs.v1 = val;
            status.innerText = "Listening... (1/4)";
        } 
        else if (step === 2) {
            inputs.v2 = val;
            status.innerText = "Listening... (2/4)";
        } 
        else if (step === 3) {
            // Top=Straight, Mid=Curved, Bot=Mixed
            if(val <= 2) inputs.s1 = "S";
            else if(val <= 4) inputs.s1 = "C";
            else inputs.s1 = "M";
            status.innerText = "Listening... (3/4)";
        } 
        else if (step === 4) {
            if(val <= 2) inputs.s2 = "S";
            else if(val <= 4) inputs.s2 = "C";
            else inputs.s2 = "M";
            
            status.innerText = "Processing...";
            setTimeout(reveal, 300); // Slight delay for drama
        }
    }

    function reveal() {
        const key = `${inputs.v1}-${inputs.v2}-${inputs.s1}-${inputs.s2}`;
        const results = dictionary[key];
        
        const revealLayer = document.getElementById('reveal-layer');
        const primary = document.getElementById('primary-word');
        const alt = document.getElementById('alt-words');

        if (results && results.length > 0) {
            // Sort by length or commonality? Defaulting to first found.
            primary.innerText = results[0]; 
            
            if (results.length > 1) {
                // Show phishing outs
                const others = results.slice(1, 10).join(", "); // Limit to 10 alt words
                alt.innerText = "Or: " + others;
            } else {
                alt.innerText = "Exact Match.";
            }
        } else {
            primary.innerText = "NO MATCH";
            alt.innerText = `Pattern: ${key}`;
        }

        revealLayer.style.display = 'flex';
        step = 0; // Reset logic internally
    }

    // --- 5. SYSTEM RESET ---
    // Double tap the reveal screen to go back
    let lastTap = 0;
    document.getElementById('reveal-layer').addEventListener('touchstart', (e) => {
        const currentTime = new Date().getTime();
        const tapLength = currentTime - lastTap;
        if (tapLength < 500 && tapLength > 0) {
            // Double Tap Detected
            document.getElementById('reveal-layer').style.display = 'none';
            status.innerText = "Ready.";
            step = 0;
        }
        lastTap = currentTime;
    });

    // Start everything
    initApp();

</script>
</body>
</html>
